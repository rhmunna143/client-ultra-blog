"use strict";(self.webpackChunkclient_ultra_blog=self.webpackChunkclient_ultra_blog||[]).push([[156],{"./src/app/profile/Profile.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Base:()=>Base,WithData:()=>WithData,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Profile_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),AllContext=__webpack_require__("./src/context/AllContext.jsx"),next_image=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const Profile=()=>{const{currentUser}=(0,react.useContext)(AllContext.d),{image_link,username,full_name,email,id}=currentUser||{};return(0,jsx_runtime.jsxs)("div",{className:"mt-10",children:[(0,jsx_runtime.jsx)("div",{className:"img w-40 h-40 aspect-square rounded-full border",children:image_link?(0,jsx_runtime.jsx)(next_image.A,{src:image_link||"/images/default.png",alt:"uploaded",className:"mt-2 w-40 h-40 aspect-square rounded-full",width:160,height:160,layout:"responsive"}):(0,jsx_runtime.jsx)("p",{className:"flex justify-center items-center",children:"DP Not updated!"})}),(0,jsx_runtime.jsxs)("p",{className:"mt-5",children:["Username: ",(0,jsx_runtime.jsx)("span",{className:"font-medium",children:username})]}),(0,jsx_runtime.jsxs)("p",{children:["Full Name: ",(0,jsx_runtime.jsx)("span",{className:"font-medium",children:full_name||"Name not updated"})]}),(0,jsx_runtime.jsxs)("p",{children:["Email: ",(0,jsx_runtime.jsx)("span",{className:"font-medium",children:email||"Email not updated"})]}),(0,jsx_runtime.jsxs)("p",{children:["ID: ",(0,jsx_runtime.jsx)("span",{className:"font-medium",children:id})]})]})},profile_Profile=Profile;var _Base_parameters,_Base_parameters_docs,_Base_parameters1,_WithData_parameters,_WithData_parameters_docs,_WithData_parameters1;Profile.__docgenInfo={description:"",methods:[],displayName:"Profile"};const Profile_stories={title:"Profile",component:profile_Profile,tags:["autodocs"]},Base=()=>(0,jsx_runtime.jsx)(profile_Profile,{}),WithData=()=>(0,jsx_runtime.jsx)(profile_Profile,{data:{name:"John Doe",age:30,email:"johndoe@example.com"}});Base.parameters={...Base.parameters,docs:{...null===(_Base_parameters=Base.parameters)||void 0===_Base_parameters?void 0:_Base_parameters.docs,source:{originalSource:"() => <Profile />",...null===(_Base_parameters1=Base.parameters)||void 0===_Base_parameters1||null===(_Base_parameters_docs=_Base_parameters1.docs)||void 0===_Base_parameters_docs?void 0:_Base_parameters_docs.source}}},WithData.parameters={...WithData.parameters,docs:{...null===(_WithData_parameters=WithData.parameters)||void 0===_WithData_parameters?void 0:_WithData_parameters.docs,source:{originalSource:'() => {\n  const data = {\n    name: "John Doe",\n    age: 30,\n    email: "johndoe@example.com"\n  };\n  return <Profile data={data} />;\n}',...null===(_WithData_parameters1=WithData.parameters)||void 0===_WithData_parameters1||null===(_WithData_parameters_docs=_WithData_parameters1.docs)||void 0===_WithData_parameters_docs?void 0:_WithData_parameters_docs.source}}};const __namedExportsOrder=["Base","WithData"]},"./src/app/lib/constant.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>imgBBApiKey,p:()=>baseUrl});const baseUrl="https://server-ultra-blog.vercel.app/api",imgBBApiKey="8dde3e3ff1f547a16312413a213e875a"},"./src/context/AllContext.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,d:()=>AllContext});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_app_lib_constant__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/app/lib/constant.js"),axios__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/axios/lib/axios.js"),next_navigation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),console=__webpack_require__("./node_modules/console-browserify/index.js");const AllContext=(0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null),AllContextProvider=param=>{let{children}=param;const[signUpUser,setSignUp]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[loginUser,setLoginUser]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[currentUser,setCurrentUser]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[refetchCurrentUser,setRefetchCurrentUser]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),router=(0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useRouter)();(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>{setLoading(!0),axios__WEBPACK_IMPORTED_MODULE_4__.A.get("".concat(_app_lib_constant__WEBPACK_IMPORTED_MODULE_5__.p,"/auth/check-login"),{withCredentials:!0}).then((res=>{res.data&&(setCurrentUser(res.data),setLoading(!1))})).catch((err=>{console.error(err)}))}),[loginUser,signUpUser,refetchCurrentUser]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>signUpUser?router.push("/login"):loginUser?router.push("/"):void 0),[signUpUser,router,loginUser]);const value={signUp:(username,password)=>{axios__WEBPACK_IMPORTED_MODULE_4__.A.post("".concat(_app_lib_constant__WEBPACK_IMPORTED_MODULE_5__.p,"/auth/register"),{username,password},{withCredentials:!0}).then((res=>{res.data.id&&(setSignUp(res.data),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.success("User created successfully"))})).catch((err=>{console.error(err),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.error("Failed to create user")}))},login:(username,password)=>{axios__WEBPACK_IMPORTED_MODULE_4__.A.post("".concat(_app_lib_constant__WEBPACK_IMPORTED_MODULE_5__.p,"/auth/login"),{username,password},{withCredentials:!0}).then((res=>{var _res_data;res.data.user_id&&(setLoginUser(res.data),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.success("".concat(null==res||null===(_res_data=res.data)||void 0===_res_data?void 0:_res_data.username," logged in successfully")))})).catch((err=>{console.error(err),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.error("Failed to log in user.")}))},signUpUser,loginUser,currentUser,logout:()=>{axios__WEBPACK_IMPORTED_MODULE_4__.A.post("".concat(_app_lib_constant__WEBPACK_IMPORTED_MODULE_5__.p,"/auth/logout"),{withCredentials:!0}).then((res=>{res.data&&(setCurrentUser(null),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.success("Logged out successfully"))})).catch((err=>{console.error(err),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.error("Failed to log out user")}))},loading,router,setRefetchCurrentUser};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AllContext.Provider,{value,children})},__WEBPACK_DEFAULT_EXPORT__=AllContextProvider;AllContextProvider.__docgenInfo={description:"",methods:[],displayName:"AllContextProvider"}}}]);